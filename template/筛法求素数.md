线性筛

预处理版本

```c++
#define MAXN ((int) 1e6)
bool flag[MAXN + 10];
bool inited = false;
void init() {
    if (inited) return;
    inited = true;
    memset(flag, 0, sizeof(flag));
    // 筛法求质数
    flag[1] = true;
    for (int i = 2; i * i <= MAXN; i++) 
        if (!flag[i]) 
            for (int j = i * 2; j <= MAXN; j += i) flag[j] = true;
}
class solution {
    main()
    {
        init();
        // do something
    }
}
```

模板： `st[]` 保存每个数是不是质数， `primes[]` 存下每一个质数

```c++
const int N = 1000010;
int primes[N], cnt;
bool st[N];
void get_primes(int n)
{
	for (int i = 2; i <= n; i++)
    {
		if (!st[i]) primes[cnt ++] = i;
        for (int j = 0; primes[j] <= n / i; j++)
        {
			st[primes[j] * i] = true;
            if (i % primes[j] == 0) break;
        }
    }
}
```

预处理版本

```c++
const int N = 1000010;

int primes[N], cnt0;
bool st[N];
bool inited = false;
void init()
{
    if (inited) return;
    inited = true;
	for (int i = 2; i <= 1000000; i++)
    {
		if (!st[i]) primes[cnt0 ++] = i;
        for (int j = 0; primes[j] <= 1000000 / i; j++)
        {
			st[primes[j] * i] = true;
            if (i % primes[j] == 0) break;
        }
    }
}
```



